# 모델링 이야기
## 고객의 정의는?
고객 데이터는 거의 모든 조직에서 관리하고 있다. 흔히 고객유형을 자연인과 법인으로 나눈다. 자연인은 주민등록번호, 외국인등록번호, 여권번호로 식별하고, 법인은 법인등록번호로 식별한다. 식별번호나 이름 주소 등의 속성 자체만 가지고는 자연인, 법인, 단체가 크게 다르지 않다.

고객의 범주에 해당하는지를 판단하기 위해 다음의 기준을 정의했다.
1) 식별 가능한 : 주민등록번호, 여권번호, 사업자등록번호 등의 식별번호를 가진다.
2) 접촉 가능한 : 주소, 전화번호 등의 접촉 가능한 정보를 가짐
3) 지속 가능한 : 일회성 거래가 아닌 지속적인 거래를 위해 정보 관리 필요성이 있음
4) 거래 주체 : 실제 경제활동을 수행하는 단위이며 지칭할 수 있는 명칭을 가짐

## 개인정보 데이터 구조와 암호화
개인정보는 개인을 식별할 수 있는 정보를 통칭한다. 개인정보는 수집 및 저장, 이용 및 활용, 제공(위탁)/처리, 파기 등의 생명주기에 따라 데이터를 관리해야 한다. 최소한의 개인정보를 수집하고 저장할 수 있도록 데이터 모델을 설계해야하고 접근 권한 설정 및 접근 로그를 설계해야한다.
ㄷ
주민등록번호는 2014년 8월 7일 원칙적으로 수집을 금지하고 있다. 법령상 근거없이 보유하고 있는 주민등록번호도 파기해야한다. 개인정보를 수집하고 저장하는 경우 '개인정보 수집 및 이용 동의' 등의 개인정보동의 항목을 관리해야한다. 또 암호화 대상을 식별하고 정의한다. 암호화 대상은 행안부 고시 해설서와 방통위 금감원에서 기준을 제시하고 있다.

암호화할 경우 DB성능 문제를 고려해야한다. 

SELECT * FROM 고객 1)WHERE 주민등록번호= '9901011234567' 2)WHERE 주민등록번호 LIKE '990101%' 

조건1의 경우 화면으로부터 암호화한 값을 받아 비교하면 되므로 성능 문제 없이 동일한 결과를 얻을 수 있다. 조건2의 경우 암복호화 방식이 DB 함수로 제동괴는 플러그인 방식인 경우 함수기반 인덱스를 생성하여 LIKE 검색하면 된다. 하지만 API 방식이면 주민등록번호 암호화를 LIKE 검색하는 것이 불가능하다. 이 경우 생년월일 컬럼을 추가하여 해결하는 방법 밖에 없다.

*데이터 암호화 방식은 API방식(자바등 프로그래밍 언어별로 라이브러리 제공), 플러그인 방식(데이터 암복호화 처리를 위해 DB 함수제공), 하이브리드 방식(API방식, 플러그인방식을 함께 적용)이 있다. 

개인정보 파기는 DB에서 영구적으로 삭제하는 방법과 보존기한이 정해진 경우 운영DB에서 별도 파기보존 DB로 분리하여 보관하는 방법, 빅데이터 분석 등을 위해 가명, 범주화, 마스킹, 총계/평균값 대체 등으로 비식별화하여 보관하는 방법이 있다.